{"version":3,"file":"bundle.umd.js","sources":["../../../../eagle-sdk/perf.js","../../../../eagle-sdk/index.js"],"sourcesContent":["\r\nexport default {\r\n    init: (cb) => {\r\n        cb()\r\n        let isDOMReady = false;\r\n        let isOnload = false;\r\n        let Util = {\r\n            getPerfData: (p) =>{\r\n                let data = {\r\n                    // 网络建连\r\n                    prevPage: p.fetchStart - p.navigationStart, // 上一个页面的时间\r\n                    redirect: p.redirectEnd - p.redirectStart, // 重定向时间\r\n                    dns: p.domainLookupEnd - p.domainLookupStart, // DNS查找时间\r\n                    connect: p.connectEnd - p.connectStart, // TCP建连时间\r\n                    network: p.connectEnd - p.navigationStart, // 网络总耗时\r\n\r\n                    // 网络接受\r\n                    send: p.responseStart - p.requestStart, // 前端从发送到接收的时间\r\n                    receive: p.responseEnd - p.responseStart, // 接收数据用时\r\n                    request: p.responseEnd - p.requestStart, // 请求页面的总耗时\r\n\r\n                    // 前端渲染\r\n                    dom: p.domComplete - p.domLoading, // dom解析时间\r\n                    loadEvent: p.loadEventEnd - p.loadEventStart, // loadEvent时间\r\n                    frontend: p.loadEventEnd - p.domLoading, // 前端总时间\r\n\r\n                    // 关键阶段\r\n                    load: p.loadEventEnd - p.navigationStart, // 页面完全加载的时间\r\n                    domReady: p.domContentLoadedEventStart - p.navigationStart, // DOM准备时间\r\n                    interactive: p.domInteractive - p.navigationStart, // 可操作时间\r\n                    ttfb: p.responseStart - p.navigationStart, // 首字节时间\r\n                };\r\n                return data\r\n            },\r\n            // DOM解析完成\r\n            domReady: (callback) => {\r\n                if (isDOMReady === true) { return void 0;}\r\n                let timer = null;\r\n                let runCheck = ()=>{\r\n                    if(performance.timing.domComplete){\r\n                        // 1.停止循环检测  2.运行callback\r\n                        clearTimeout(timer)\r\n                        callback()\r\n                        isDOMReady = true;\r\n                    } else {\r\n                        // 再去循环检测\r\n                        timer = setTimeout(runCheck, 100);\r\n                    }\r\n                }\r\n                if(document.readyState === 'interactive'){\r\n                    callback();\r\n                    return void 0;\r\n                }\r\n                document.addEventListener('DOMContentLoaded', ()=>{\r\n                    // 开始循环检测， 是否DOMContentLoaded已经完成。\r\n                    runCheck();\r\n                })\r\n            },\r\n            // 页面加载完成\r\n            onload: ()=>{\r\n\r\n            }\r\n        }\r\n\r\n        let performance = window.performance;\r\n        Util.domReady(()=>{\r\n            let perfData = Util.getPerfData(performance.timing)\r\n            // 获取到数据应该给sdk上层 去上传这个数据\r\n            console.log(perfData);\r\n            debugger\r\n        });\r\n\r\n    }\r\n}","import perf from './perf.js'\r\n\r\n\r\nperf.init(()=>{\r\n    console.log('perf init');\r\n})\r\n"],"names":[],"mappings":"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"}